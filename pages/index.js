import Head from 'next/head'
import * as React from 'react';
import Box from '@mui/material/Box';
import SkillsBox from '../components/skills/skillsBox.js';
import Paper from '@mui/material/Paper';
import Skeleton from '@mui/material/Skeleton';
import Typography from '@mui/material/Typography';
import Divider from '@mui/material/Divider';
import useContentful from '../hooks/use-contenful';

const query = ` {
  skillsCollection {
    items {
      slug
      name
      usage
      image {
        url
      }
    }
  }
}
`

const drawerWidth = 240;

export default function Home() {
  
  let {data, errors} = useContentful(query)

  if (errors) {
    return <span style={{color:"red"}}> {errors.map(error => error.message).join(",")} </span>
  }
  
  //Skeleton
  if (!data) { 
    return (
      <>
        <Box sx={{
          display: 'flex',
          justifyContent: "center",
          flexWrap: 'wrap',
          width: 'auto',
          mt: 5, 
          mb: 5
          }}
        > 
          <Paper 
            elevation={3} 
            sx={{
              p: 2
            }}
          >
            <Skeleton variant="rounded" width={210} height={210} />
          </Paper>
        </Box> 
      </>
    )
  }

  return (
      <>
      <Head>
        <title>Home - Brandon Tetrick</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      
      <Box sx={{ display: 'flex' }}>
        <Box
          component="main"
          sx={{ flexGrow: 1, p: 3, width: { sm: `calc(100% - ${drawerWidth}px)` } }}
        >
          <Typography 
            variant="h1" 
            align="center"
          >
            Brandon Tetrick
          </Typography>

          <Typography 
            paragraph align="center"
          >
            Former educator turned web developer with 7+ years of working in both the public and private sectors. 
            Has provided academic and professional services for a wide variety of students, clients, and customers. 
            Life-long learner with a passion for web development and digital marketing.
          </Typography>
          
          <Divider/> 

          <Typography 
            variant="h4" 
            align="center"
            sx= {{
              mt: 5
            }}
          >
            My Skill Set
          </Typography>

          <SkillsBox data={data} />
        </Box>
      </Box>  
      </>
  )
}
